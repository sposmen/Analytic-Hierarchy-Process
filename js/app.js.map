{"version":3,"file":"_public/js/app.js.map","sources":["app/app.coffee","app/scripts/controllers/app.controllers.coffee","app/scripts/controllers/factors.controller.coffee","app/scripts/controllers/home.controller.coffee","app/scripts/directives.coffee","app/scripts/filters.coffee","app/scripts/models/factor.model.coffee","app/scripts/services.coffee"],"names":["App","angular","module","config","$routeProvider","$locationProvider","when","templateUrl","otherwise","redirectTo","html5Mode","Controllers","controller","$scope","$location","$watch","path","activeNavId","getClass","id","substring","length","$rootScope","Factor","pair_wise_optionsChange","pairwiseChange","show_process","column","e","i","j","row","v1","v2","_i","_j","_k","_l","_len","_len1","_len2","_len3","_ref","_ref1","_ref2","_results","parentFactor","columnSum","columnSumUnit","rowSum","pairwise","pairwisefractions","eval","_error","parseFloat","factors","push","addFactor","option","addChild","pair_wise_options","pair_wise_options_fractions","options","factor","k","columnSumOptions","columnSumUnitOptions","rowSumOptions","_len4","_m","_ref3","_results1","addOption","name","description","optionsScore","score","pageTitle","rootFactor","saveFile","data","downloadData","newWindow","uriContent","getTree","$","base64","btoa","JSON","stringify","window","open","handleFileSelect","element","reader","selectedFile","files","FileReader","onload","parse","atob","target","result","$apply","setTree","readAsText","replaceAll","clone","alert","loadData","directive","version","scope","elm","text","attrs","on","preventDefault","parent","find","clicksTo","click","restrict","level","transclude","replace","filter","String","factory","this","meta","childs","prototype","child","copy","getChilds","getChild","index","removeChild","splice","hasChilds","hasParent","getOptionsScore","notChilded","isNaN","indexOf"],"mappings":"AAAA,YAAA,IAAAA,IAGAA,KAAMC,QAAsBC,OAAA,OAAA,YAAA,aAAA,kBAAA,iBAAA,aAAA,yBAAA,cAAA,eAAA,WAAA,iBAa5BF,IAAGG,QAED,iBAFS,oBAAA,SAAAC,EAAAC,GAgBS,MAVlBD,GAEEE,KAAA,SAAgBC,YAAA,wBAFlBD,KAAA,UAGmBC,YAAA,4BAHnBD,KAAA,UAImBC,YAAA,4BAJnBC,WAOcC,WAAA,UAGdJ,EAAiBK,WAAA,KChCnB,IAAAC,YAIAA,aAAAV,QAAcC,OAAA,sBAAAU,WAAA,WAIZ,SAFqB,YAAA,YAAA,aAAA,SAAAC,EAAAC,GAuBH,MAblBD,GAAAC,UAAAA,EACAD,EAAmCE,OAAnC,mBAAA,SAAAC,GACQ,MAANH,GAAAI,YAAAD,GAAA,MAWFH,EAAAK,SAAA,SAAAC,GACE,MAAGN,GAAkBI,YAAAG,UAAA,EAAAD,EAAAE,UAAAF,EACZ,SAEA,OCjCbR,YAAWC,WAAX,eAEE,SAFoC,aAAA,SAAA,SAAAC,OAAAS,WAAAC,QAOpC,GAAAC,yBAAAC,cA4E4C,OA5E5CZ,QAAgCa,aAAhCJ,WAAAI,aAEAb,OAAsCE,OAAA,wBAAtC,WACE,MAAAU,oBADoC,GAItCA,eAAA,WACE,GAAAE,QAAAC,EAAAC,EAAAC,EAAAC,IAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,KAAAC,MAAAC,MAAAC,MAAAC,KAAAC,MAAAC,MAAAC,QAGA,KAHAhC,OAAmBiC,aAAAC,aACnBlC,OAAAiC,aAAAE,iBACAnC,OAAmBiC,aAAAG,UACnBP,KAAA7B,OAAAiC,aAAAI,SAAArB,EAAAK,GAAA,EAAAI,KAAAI,KAAArB,OAAAiB,KAAAJ,GAAAL,IAAAK,GACE,IADFH,IAAAW,KAAAb,GACEC,EAAAK,GAAA,EAAAI,MAAAR,IAAAV,OAAAkB,MAAAJ,GAAAL,IAAAK,GAAAR,OAAAI,IAAAD,GACEH,OAA+Cd,OAAAiC,aAAAK,kBAAAtB,GAAAC,GAAA,WAC7C,IACE,MAAAsB,MAAAzB,QADF,MAAA0B,QAAA,MAEMzB,GAAAyB,OACJ,MAEuD,SAAAxC,OAAAiC,aAAAC,UAAAjB,KAA3DjB,OAAAiC,aAAAC,UAAAjB,GAAA,GACAjB,OAAmBiC,aAAAC,UAAAjB,GAAAjB,OAAAiC,aAAAC,UAAAjB,GAAAwB,WAAA3B,OACvB,KAAAgB,MAAA9B,OAAA0C,QAAAV,YAAAhB,EAAAO,GAAA,EAAAI,MAAAG,MAAAtB,OAAAmB,MAAAJ,GAAAP,IAAAO,GAAA,CAEE,IAFFJ,GAAAW,MAAAd,GAC0D,SAAAhB,OAAAiC,aAAAG,OAAApB,KAAxDhB,OAAmBiC,aAAAG,OAAApB,GAAA,GACnBe,MAAA/B,OAAA0C,QAAAzB,EAAAO,GAAA,EAAAI,MAAAG,MAAAvB,OAAAoB,MAAAJ,GAAAP,IAAAO,GAAAJ,GAAAW,MAAAd,GACgF,SAAAjB,OAAAiC,aAAAE,cAAAlB,KAA9EjB,OAAkCiC,aAAAE,cAAAlB,GAAA,GAClCjB,OAAoHiC,aAAAE,cAAAlB,GAAAjB,OAAAiC,aAAAE,cAAAlB,GAAAjB,OAAAiC,aAAAK,kBAAAtB,GAAAC,GAAAjB,OAAAiC,aAAAC,UAAAjB,GACpHjB,OAAsGiC,aAAAG,OAAApB,GAAAhB,OAAAiC,aAAAG,OAAApB,GAAAhB,OAAAiC,aAAAK,kBAAAtB,GAAAC,GAAAjB,OAAAiC,aAAAC,UAAAjB,EAC5Be,UAAzDW,KAAA3C,OAAAiC,aAAAG,OAAApB,GAAAhB,OAAAiC,aAAAG,OAAApB,GAAAhB,OAAA0C,QAAAlC,QANrB,MAAAwB,WAQFhC,OAAA4C,UAAA,WACE,GAAA5B,GAAA6B,EAAAxB,EAAAI,EAAAI,EAAAG,CAKA,KALAhB,EAAIhB,OAAmBiC,aAAAa,WAAA,EACvB9C,OAAmBiC,aAAAI,SAAAM,SACnB3C,OAAmBiC,aAAkBK,kBAAAK,SACrC3C,OAAmBiC,aAAmBc,kBAAA/B,MACtChB,OAAmBiC,aAAAe,4BAA6BhC,MAChDa,EAAA7B,OAAAiD,QAAAjB,KAAAX,EAAA,EAAAI,EAAAI,EAAArB,OAAAiB,EAAAJ,EAAAA,IAAAwB,EAAAhB,EAAAR,GACErB,OAAmBiC,aAAmBc,kBAAA/B,GAAA2B,SAChCX,EAAaW,KAAA3C,OAA6BiC,aAAAe,4BAAAhC,GAAA2B,SAFlD,OAAAX,IAIFhC,OAA+CE,OAAA,iCAA/C,WACE,MAAAS,6BAD6C,GAI/CA,wBAAA,WACE,GAAAG,QAAAC,EAAAmC,OAAAlC,EAAAC,EAAAkC,EAAAjC,IAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAE,KAAAC,MAAAC,MAAAE,KAAAC,MAAAE,QAAA,KAAAH,KAAA7B,OAAA0C,QAAAV,YAAAmB,EAAA9B,GAAA,EAAAI,KAAAI,KAAArB,OAAAiB,KAAAJ,GAAA8B,IAAA9B,GAAA,CAIE,IAJF6B,OAAArB,KAAAsB,GACEnD,OAAmBiC,aAAkBmB,iBAAAD,MACrCnD,OAAmBiC,aAAsBoB,qBAAAF,MACzCnD,OAAkCiC,aAAAqB,cAAAH,MAClCrB,MAAA9B,OAAAiC,aAAAc,kBAAAI,GAAAnC,EAAAM,GAAA,EAAAI,MAAAI,MAAAtB,OAAAkB,MAAAJ,GAAAN,IAAAM,GACE,IADFJ,IAAAY,MAAAd,GACEC,EAAAM,GAAA,EAAAI,MAAAT,IAAAV,OAAAmB,MAAAJ,GAAAN,IAAAM,GAAAT,OAAAI,IAAAD,GACEH,OAAAd,OAAyDiC,aAAAe,4BAAAG,GAAAnC,GAAAC,GAAA,WACvD,IACE,MAAAsB,MAAAzB,QADF,MAAA0B,QAAA,MAEMzB,GAAAyB,OACJ,MAEmF,SAAAxC,OAAAiC,aAAAmB,iBAAAD,GAAAlC,KAAvFjB,OAAqCiC,aAAAmB,iBAAAD,GAAAlC,GAAA,GACrCjB,OAAqCiC,aAAAmB,iBAAAD,GAAAlC,GAAAjB,OAAAiC,aAAAmB,iBAAAD,GAAAlC,GAAAwB,WAAA3B,OAZzCkB,UAAAW,KAAA,WAAA,GAAAnB,GAAAI,EAAA2B,EAAAC,EAAAzB,EAAA0B,EAAAC,CAaA,KAAA3B,EAAA/B,OAAAiD,QAAAS,KAAA1C,EAAAQ,EAAA,EAAAI,EAAAG,EAAAvB,OAAAoB,EAAAJ,EAAAR,IAAAQ,EAAA,CAEE,IAFFL,GAAAY,EAAAf,GACmF,SAAAhB,OAAAiC,aAAAqB,cAAAH,GAAAnC,KAAjFhB,OAAAiC,aAAAqB,cAAAH,GAAAnC,GAAA,GACAyC,EAAAzD,OAAAiD,QAAAhC,EAAAuC,EAAA,EAAAD,EAAAE,EAAAjD,OAAA+C,EAAAC,EAAAvC,IAAAuC,EAAApC,GAAAqC,EAAAxC,GACiG,SAA/FjB,OAA+FiC,aAAAoB,qBAAAF,GAAAlC,KAA/FjB,OAAyCiC,aAAAoB,qBAAAF,GAAAlC,GAAA,GACzCjB,OAAyCiC,aAAyGoB,qBAAAF,GAAAlC,GAAAjB,OAAAiC,aAAAoB,qBAAAF,GAAAlC,GAAAjB,OAAAiC,aAAAe,4BAAAG,GAAAnC,GAAAC,GAAAjB,OAAAiC,aAAAmB,iBAAAD,GAAAlC,GAClJjB,OAAkLiC,aAA9CqB,cAAAH,GAAAnC,GAAAhB,OAAAiC,aAAAqB,cAAAH,GAAAnC,GAAAhB,OAAAiC,aAAAe,4BAAAG,GAAAnC,GAAAC,GAAAjB,OAAAiC,aAAAmB,iBAAAD,GAAAlC,EACnHyC,GAAef,KAAA3C,OAAAiC,aAAAqB,cAAAH,GAAAnC,GAAAhB,OAAAiC,aAAAqB,cAAAH,GAAAnC,GAAAhB,OAAAiD,QAAAzC,QANpC,MAAAkD,OAdF,MAAA1B,WAsBFhC,OAAAE,OAAA,UAAA,WACE,GAAAgD,GAAAlC,EAAA6B,EAAAxB,EAAAI,EAAAI,EAAAG,CAAA,KAAAH,EAAA7B,OAAA0C,QAAAV,KAAAhB,EAAAK,EAAA,EAAAI,EAAAI,EAAArB,OAAAiB,EAAAJ,EAAAL,IAAAK,EAAA6B,EAAArB,EAAAb,GACEgB,EAAAW,KAAA,WAAA,GAAArB,GAAAI,EAAAI,EAAA4B,CAAA,KAAA5B,EAAA9B,OAAAiD,QAAAS,KAAApC,EAAA,EAAAI,EAAAI,EAAAtB,OAAAkB,EAAAJ,EAAAA,IAAAuB,EAAAf,EAAAR,GACEtB,OAAsCiC,aAAAc,kBAAA/B,GAAA2B,SACnBe,EAAAf,KAA6B3C,OAAAiC,aAAAe,4BAAAhC,GAAA2B,SAFlD,OAAAe,MADF,OAAA1B,KADuB,GAOzBhC,OAAA2D,UAAA,WACQ,MAAN3D,QAAAiD,QAAAN,MAAoBiB,KAAA,aAAmBC,YAAA,MAGzC7D,OAAAE,OAAA,6BAAA,WACE,GAAAgD,GAAAlC,EAAAmC,EAAAN,EAAAxB,EAAAI,EAAAI,EAAAG,CACA,KADAhC,OAAmBiC,aAAA6B,gBACnBjC,EAAA7B,OAAA0C,QAAAV,KAAAmB,EAAA9B,EAAA,EAAAI,EAAAI,EAAArB,OAAAiB,EAAAJ,EAAA8B,IAAA9B,EAAA6B,EAAArB,EAAAsB,GACEnB,EAAAW,KAAA,WAAA,GAAArB,GAAAI,EAAAI,EAAA4B,CAAA,KAAA5B,EAAA9B,OAAAiD,QAAAS,KAAA1C,EAAAM,EAAA,EAAAI,EAAAI,EAAAtB,OAAAkB,EAAAJ,EAAAN,IAAAM,EAAAuB,EAAAf,EAAAd,GACE,SAAAhB,OAAAiC,aAAA6B,aAAA9C,KAAAhB,OAAAiC,aAAA6B,aAAA9C,IAAuC6B,OAAAA,EAAekB,MAAA,IACnCL,EAAwIf,KAAA3C,OAAAiC,aAAA6B,aAAA9C,GAAA+C,MAAA/D,OAAAiC,aAAA6B,aAAA9C,GAAA+C,MAAA/D,OAAAiC,aAAAG,OAAAe,GAAAnD,OAAAiC,aAAAqB,cAAAH,GAAAnC,GAF7J,OAAA0C,MADF,OAAA1B,KAF0C,MCnF9ClC,YAAWC,WAAA,YAET,SAFiC,aAAA,SAAA,SAAAC,EAAAS,EAAAC,GAqDjB,MA9ChBD,GAAUuD,UAAA,6BAEVvD,EAAAI,cAAA,EAEAb,EAAAiE,WAAA,GAAAvD,GACAV,EAAiBiE,WAAAL,KAAA,UAEjB5D,EAAiBiE,WAAAnB,WAGjB9C,EAAAiD,UACEY,YAAA,GACAD,KAAA,kBAIF5D,EAAgBkE,SAAA,WACd,GAAAC,GAAAC,EAAAC,EAAAC,CAMgB,OANhBH,IACEzB,QAAyB1C,EAAAiE,WAAAM,UACzBtB,QAAAjD,EAAAiD,SAEFmB,EAAAI,EAAAC,OAAAC,KAAAC,KAAAC,UAAAT,IACAG,EALA,4CAKaF,EACbC,EAAAQ,OAAAC,KAAAR,EAAA,aAEFtE,EAA2B+E,iBAA3B,SAAAC,GACE,GAAAC,EACA,OADAjF,GAAAkF,aAAAF,EAAAG,MAAA,GACA,MAAAnF,EAAAkF,cACED,EAAa,GAAAG,YAEbH,EAAkBI,OAAA,WACf,MAAD,UAAAtE,GACE,GAAAoD,EACc,OADdA,GAAAQ,KAAAW,MAAAd,EAAAC,OAAAc,KAAAxE,EAAAyE,OAAAC,SACAzF,EAAA0F,OAAA,WAGmB,MAFjB1F,GAAAiE,WAAA,GAAAvD,GACAV,EAAAiD,QAAAkB,EAAAlB,QACAjD,EAAAiE,WAAA0B,QAAAxB,EAAAzB,aANW1C,EAADkF,cAWhBD,EAAAW,WAAA5F,EAAAkF,cACAV,EAAAQ,GAAAa,WAAArB,EAAAQ,GAAAc,UAEAC,MAAA,iBAEJ/F,EAAAgG,SAAA,gBChDF5G,QAAOC,OAA0B,kBAAjC,iBAAA4G,UAAA,cAQA,UAHyB,SAAAC,GAIvB,MAAA,UAAAC,EAAAC,GACE,MAAAA,GAAAC,KAAAH,OAGmBD,UAbvB,WAAA,WAcU,MAAR,UAAAE,EAAAnB,EAAAsB,GACyB,MAAvB9B,GAAAQ,GAAAuB,GAAA,QAAA,SAAAxF,GAEE,MADAA,GAAAyF,iBACAhC,EAAAQ,GAAAyB,SAAAC,KAAAJ,EAAAK,UAAAC,aAEgBX,UAnBtB,UAAA,WAAA,OAoBEY,SAAA,IACAV,OACEzD,QAAA,UACAO,QADA,WAEAhB,aAFA,gBAGA6E,MAHA,UAIFC,YAAA,EACAhH,WAPA,cAQAL,YAAA,yBACAsH,SAAA,KC9BF5H,QAAOC,OAAP,kBAAA4H,OAAA,eAKA,UAHuB,SAAAf,GAIrB,MAAA,UAAAG,GACE,MAAAa,QAAAb,GAAAW,QAAA,gBAAAd,OCXJ9G,QAAAC,OAAA,iBAAA8H,QAAA,SAAA,WAGE,GAAAzG,EAAA,OAAMA,GAAA,WAES,QAAAA,GAAC+F,GACZW,KAAAX,OAAAA,IAAA,EACAW,KAAAC,KAAA,GACAD,KAAAxD,KAFA,aAGAwD,KAAA/E,cACA+E,KAAA9E,uBACA8E,KAAAlF,aACAkF,KAAAjF,iBACAiF,KAAAhF,UACAgF,KAAArE,yBACAqE,KAAApE,mCACAoE,KAAAhE,sBACAgE,KAAA/D,0BACA+D,KAAA9D,mBACA8D,KAAAtD,gBACAsD,KAAAE,UAfF,MAiBQ5G,GAAA6G,UAAAhD,QAAA,WACN,GAAAiD,GAAAF,EAAAjG,EAAAI,EAAAI,CACA,KADAyF,KACAzF,EAAAuF,KAAAE,OAAAjG,EAAA,EAAAI,EAAAI,EAAArB,OAAAiB,EAAAJ,EAAAA,IAAAmG,EAAA3F,EAAAR,GAAAiG,EAAA3E,KAAA6E,EAAAjD,UADA,QAGAX,KAAAwD,KAAAxD,KACAyD,KAAAD,KAAAC,KACAhF,SAAA+E,KAAA/E,SACAU,kBAAAqE,KAAArE,kBACAuE,OAAAA,IAEM5G,EAAC6G,UAAA5B,QAAA,SAAAxB,GACP,GAAAqD,GAAAxG,EAAAK,EAAAI,EAAAI,EAAAG,CAMA,KANAoF,KAAAxD,KAAAO,EAAAP,KACAwD,KAAAC,KAAAlD,EAAAkD,KACAD,KAAA/E,SAAA8B,EAAA9B,SACA+E,KAAoB9E,kBAApBlD,QAAAqI,KAAAtD,EAAA9B,UACA+E,KAAArE,kBAAAoB,EAAApB,kBACAqE,KAAsCpE,4BAAtC5D,QAAAqI,KAAAtD,EAAApB,mBACAlB,EAAAsC,EAAAmD,OAAAtF,KAAAX,EAAA,EAAAI,EAAAI,EAAArB,OAAAiB,EAAAJ,EAAAA,IAAAmG,EAAA3F,EAAAR,GACEL,EAAAoG,KAAAtE,WAAA,EACAd,EAAAW,KAAAyE,KAAAE,OAAAtG,GAAA2E,QAAA6B,GAFF,OAAAxF,IAIQtB,EAAV6G,UAAAG,UAAA,WACG,MAADN,MAAAE,QAEO5G,EAAC6G,UAAAI,SAAA,SAAAC,GACA,MAARR,MAAAE,OAAAM,KAAA,GAEOlH,EAAA6G,UAAAzE,SAAA,WACA,MAAPsE,MAAAE,OAAA3E,KAAA,GAAAjC,GAAA0G,QAEU1G,EAAZ6G,UAAAM,YAAA,SAAAD,GAKS,MAJPR,MAAS/E,SAAAyF,OAAAF,EAAA,GACTR,KAAA9E,kBAAkBwF,OAAAF,EAAA,GAClBR,KAAArE,kBAAkB+E,OAAAF,EAAA,GAClBR,KAAApE,4BAA4B8E,OAAAF,EAAA,GAC5BR,KAAAE,OAAAQ,OAAAF,EAAA,IAEQlH,EAAV6G,UAAAQ,UAAA,WACW,QAATX,KAAAE,OAAA9G,QAEQE,EAAV6G,UAAAS,UAAA,WACE,QAAAvB,SAAA,GAEc/F,EAAC6G,UAAjBU,gBAAA,SAAAL,GACE,GAAAJ,GAAAU,EAAAzC,EAAApE,EAAAI,EAAAI,CAEA,IAFA4D,EAAA,EACAyC,GAAA,EACGd,KAAAW,YACD,IAAAlG,EAAAuF,KAAAE,OAAAjG,EAAA,EAAAI,EAAAI,EAAArB,OAAAiB,EAAAJ,EAAAA,IAAAmG,EAAA3F,EAAAR,GACEmG,EAAAO,cACEG,GAAA,EACAzC,GAAU+B,EAAAS,gBAAAL,GAPF,OASdM,KACEzC,EAA0B,SAAA2B,KAAAtD,aAAA8D,IAAAO,MAAAf,KAAAtD,aAAA8D,GAAA7D,OAAA,EAAAqD,KAAAtD,aAAA8D,GAAA7D,MAC1BqD,KAAAX,QAAA,SAAAW,KAAAX,OAAArE,OAAAgF,KAAAX,OAAAa,OAAAc,QAAAhB,SAAAe,MAAAf,KAAAX,OAAArE,OAAAgF,KAAAX,OAAAa,OAAAc,QAAAhB,SAAA,IAAAA,KAAAX,OAAArE,OAAAgF,KAAAX,OAAAa,OAAAc,QAAAhB,SAII3B,GAAA2B,KAAAX,OAAArE,OAAAgF,KAAAX,OAAAa,OAAAc,QAAAhB,SAEN3B,GA7EF/E,OCDJtB,QAAOC,OAAP,mBAAA8H,QAAA,UAAA,WAEoB,MAAG","sourcesContent":["'use strict'\n\n# Declare app level module which depends on filters, and services\nApp = angular.module('app', [\n  'ngCookies'\n  'ngResource'\n  'app.controllers'\n  'app.directives'\n  'app.models'\n  'googlechart.directives'\n  'app.filters'\n  'app.services'\n  'partials'\n  'ui.bootstrap'\n])\n\nApp.config([\n  '$routeProvider'\n  '$locationProvider'\n\n($routeProvider, $locationProvider, config) ->\n\n  $routeProvider\n\n    .when('/home', {templateUrl: '/partials/home.html'})\n    .when('/view1', {templateUrl: '/partials/partial1.html'})\n    .when('/view2', {templateUrl: '/partials/partial2.html'})\n\n    # Catch all\n    .otherwise({redirectTo: '/home'})\n\n  # Without server side support html5 must be disabled.\n  $locationProvider.html5Mode(false)\n])\n","'use strict'\n\n### Controllers ###\n\nControllers = angular.module('app.controllers', [])\n\n.controller('AppCtrl', [\n  '$scope'\n  '$location'\n  '$resource'\n  '$rootScope'\n\n($scope, $location, $resource, $rootScope) ->\n\n  # Uses the url to determine if the selected\n  # menu item should have the class active.\n  $scope.$location = $location\n  $scope.$watch('$location.path()', (path) ->\n    $scope.activeNavId = path || '/'\n  )\n\n  # getClass compares the current url with the id.\n  # If the current url starts with the id it returns 'active'\n  # otherwise it will return '' an empty string. E.g.\n  #\n  #   # current url = '/products/1'\n  #   getClass('/products') # returns 'active'\n  #   getClass('/orders') # returns ''\n  #\n  $scope.getClass = (id) ->\n    if $scope.activeNavId.substring(0, id.length) == id\n      return 'active'\n    else\n      return ''\n])","Controllers.controller('FactorsCtrl', [\n  '$scope'\n  '$rootScope'\n  'Factor'\n\n($scope, $rootScope, Factor) ->\n  \n  $scope.show_process = $rootScope.show_process\n  \n  $scope.$watch 'parentFactor.pairwise',->\n    pairwiseChange()\n  , true\n  \n  pairwiseChange=->\n    $scope.parentFactor.columnSum = []\n    $scope.parentFactor.columnSumUnit = []\n    $scope.parentFactor.rowSum = []\n    for row,i in $scope.parentFactor.pairwise\n      for column,j in row\n        column = $scope.parentFactor.pairwisefractions[i][j] = (\n          try\n            eval(column)\n          catch e\n            0\n        )\n        $scope.parentFactor.columnSum[j] = 0 if $scope.parentFactor.columnSum[j] is undefined\n        $scope.parentFactor.columnSum[j] = $scope.parentFactor.columnSum[j] + parseFloat(column)\n    for v1, i in $scope.factors\n      $scope.parentFactor.rowSum[i] = 0 if $scope.parentFactor.rowSum[i] is undefined\n      for v2, j in $scope.factors\n        $scope.parentFactor.columnSumUnit[j] = 0 if $scope.parentFactor.columnSumUnit[j] is undefined\n        $scope.parentFactor.columnSumUnit[j] = $scope.parentFactor.columnSumUnit[j] + $scope.parentFactor.pairwisefractions[i][j]/$scope.parentFactor.columnSum[j]\n        $scope.parentFactor.rowSum[i] = $scope.parentFactor.rowSum[i] + $scope.parentFactor.pairwisefractions[i][j]/$scope.parentFactor.columnSum[j]\n      $scope.parentFactor.rowSum[i] = $scope.parentFactor.rowSum[i]/$scope.factors.length\n    \n  $scope.addFactor=()->\n    i = $scope.parentFactor.addChild()-1\n    $scope.parentFactor.pairwise.push([])\n    $scope.parentFactor.pairwisefractions.push([])\n    $scope.parentFactor.pair_wise_options[i] = []\n    $scope.parentFactor.pair_wise_options_fractions[i] = []\n    for option in $scope.options\n      $scope.parentFactor.pair_wise_options[i].push([])\n      $scope.parentFactor.pair_wise_options_fractions[i].push([])\n  \n  $scope.$watch 'parentFactor.pair_wise_options',->\n    pair_wise_optionsChange()\n  , true\n  \n  pair_wise_optionsChange=->\n    for factor,k in $scope.factors \n      $scope.parentFactor.columnSumOptions[k] = []\n      $scope.parentFactor.columnSumUnitOptions[k] = []\n      $scope.parentFactor.rowSumOptions[k] = []\n      for row,i in $scope.parentFactor.pair_wise_options[k]\n        for column,j in row\n          column = $scope.parentFactor.pair_wise_options_fractions[k][i][j] = (\n            try\n              eval(column)\n            catch e\n              0\n          )\n          $scope.parentFactor.columnSumOptions[k][j] = 0 if $scope.parentFactor.columnSumOptions[k][j] is undefined\n          $scope.parentFactor.columnSumOptions[k][j] = $scope.parentFactor.columnSumOptions[k][j] + parseFloat(column)\n      for v1, i in $scope.options\n        $scope.parentFactor.rowSumOptions[k][i] = 0 if $scope.parentFactor.rowSumOptions[k][i] is undefined\n        for v2, j in $scope.options\n          $scope.parentFactor.columnSumUnitOptions[k][j] = 0 if $scope.parentFactor.columnSumUnitOptions[k][j] is undefined\n          $scope.parentFactor.columnSumUnitOptions[k][j] = $scope.parentFactor.columnSumUnitOptions[k][j] + $scope.parentFactor.pair_wise_options_fractions[k][i][j]/$scope.parentFactor.columnSumOptions[k][j]\n          $scope.parentFactor.rowSumOptions[k][i] = $scope.parentFactor.rowSumOptions[k][i] + $scope.parentFactor.pair_wise_options_fractions[k][i][j]/$scope.parentFactor.columnSumOptions[k][j]\n        $scope.parentFactor.rowSumOptions[k][i] = $scope.parentFactor.rowSumOptions[k][i]/$scope.options.length\n  \n  $scope.$watch 'options', (newValue, oldValue) ->\n    for factor,i in $scope.factors\n      for option in $scope.options\n        $scope.parentFactor.pair_wise_options[i].push([])\n        $scope.parentFactor.pair_wise_options_fractions[i].push([])\n  , true\n  \n  $scope.addOption=()->\n    $scope.options.push(name:'New Option', description:'')\n    \n  \n  $scope.$watch 'parentFactor.rowSumOptions', ->\n    $scope.parentFactor.optionsScore = []\n    for factor, k in $scope.factors\n      for option, i in $scope.options\n        $scope.parentFactor.optionsScore[i] = {option:option, score:0} if $scope.parentFactor.optionsScore[i] is undefined\n        $scope.parentFactor.optionsScore[i].score = $scope.parentFactor.optionsScore[i].score + ($scope.parentFactor.rowSum[k] * $scope.parentFactor.rowSumOptions[k][i])\n    \n  , true\n  \n   \n])\n","Controllers.controller('HomeCtrl', [\n  '$scope'\n  '$rootScope'\n  'Factor'\n\n($scope, $rootScope, Factor) ->\n\n  $rootScope.pageTitle = \"Analytic Hierarchy Process\"\n  \n  $rootScope.show_process = false\n\n  $scope.rootFactor = new Factor()\n  $scope.rootFactor.name = 'General'\n    \n  $scope.rootFactor.addChild()\n  \n  # Proyects or Options to be evaluated\n  $scope.options = [\n    description:''\n    name:'Sample Option'\n  ]\n  \n  #File utility\n  $scope.saveFile=()->\n    data =\n      factors:$scope.rootFactor.getTree()\n      options:$scope.options\n    \n    downloadData = $.base64.btoa(JSON.stringify(data));      \n    uriContent = \"data:application/octet;filename=AHP.json,\" + downloadData \n    newWindow=window.open(uriContent, 'AHP.json');\n  \n  $scope.handleFileSelect = (element)->\n    $scope.selectedFile = element.files[0]\n    if $scope.selectedFile?\n      reader = new FileReader()\n\n      reader.onload = ((file)->\n        (e)->\n          data = JSON.parse $.base64.atob(e.target.result)\n          $scope.$apply ->\n            $scope.rootFactor = new Factor()\n            $scope.options= data.options\n            $scope.rootFactor.setTree(data.factors)\n            \n          \n      )($scope.selectedFile)\n\n      reader.readAsText $scope.selectedFile\n      $(element).replaceAll($(element).clone())\n    else\n      alert 'Invalid file'\n      \n  $scope.loadData=(data)->\n    \n])\n","'use strict'\n\n### Directives ###\n\n# register the module with Angular\nangular.module('app.directives', [\n  # require the 'app.service' module\n  'app.services'\n])\n\n.directive('appVersion', [\n  'version'\n\n(version) ->\n  (scope, elm, attrs) ->\n    elm.text(version)\n])\n\n.directive 'clicksTo', ->\n  (scope, element, attrs) ->\n    $(element).on 'click', (e) ->\n      e.preventDefault()\n      $(element).parent().find(attrs.clicksTo).click()\n\n.directive 'factors', ->\n  restrict: 'E'\n  scope: \n    factors: '=childs'\n    options: '=options'\n    parentFactor: '=parentFactor'\n    level: '=level'\n  transclude: true\n  controller: 'FactorsCtrl'\n  templateUrl: '/partials/factors.html'\n  replace: true","'use strict'\n\n### Filters ###\n\nangular.module('app.filters', [])\n\n.filter('interpolate', [\n  'version',\n\n(version) ->\n  (text) ->\n    String(text).replace(/\\%VERSION\\%/mg, version)\n])\n","angular.module('app.models', [])\n\n.factory 'Factor', () ->\n  class Factor\n    \n    constructor: (parent)->\n      @parent = parent || false\n      @meta = ''\n      @name = 'New Factor'\n      @pairwise = [[]]\n      @pairwisefractions = [[]]\n      @columnSum = []\n      @columnSumUnit = []\n      @rowSum = []\n      @pair_wise_options = [[[]]]\n      @pair_wise_options_fractions = [[[]]]\n      @columnSumOptions = [[]]\n      @columnSumUnitOptions = [[]]\n      @rowSumOptions = [[]]\n      @optionsScore = []\n      @childs = []\n      \n    getTree:->\n      childs = []\n      childs.push(child.getTree()) for child in @childs\n      \n      name: @name\n      meta: @meta\n      pairwise:@pairwise\n      pair_wise_options:@pair_wise_options\n      childs:childs\n      \n    setTree:(data)->\n      @name = data.name\n      @meta= data.meta\n      @pairwise= data.pairwise\n      @pairwisefractions= angular.copy data.pairwise\n      @pair_wise_options=data.pair_wise_options\n      @pair_wise_options_fractions = angular.copy data.pair_wise_options\n      for child in data.childs\n        i = @addChild() - 1\n        @childs[i].setTree(child)\n      \n    getChilds:->\n      @childs\n      \n    getChild:(index)->\n      @childs[index] || false\n      \n    addChild:()->\n      @childs.push(new Factor(@))\n      \n    removeChild:(index)->\n      @pairwise.splice(index, 1)\n      @pairwisefractions.splice(index, 1)\n      @pair_wise_options.splice(index, 1)\n      @pair_wise_options_fractions.splice(index, 1)\n      @childs.splice(index, 1)\n      \n    hasChilds:->\n      !!@childs.length\n      \n    hasParent:->\n      !!parent || false\n    \n    getOptionsScore:(index)->\n      result = 0\n      notChilded = true\n      if @hasChilds()\n        for child in @childs\n          if child.hasChilds()\n            notChilded = false\n            result += child.getOptionsScore(index)\n      \n      if notChilded\n        result = if @optionsScore[index] != undefined and not isNaN(@optionsScore[index].score) then @optionsScore[index].score else 0\n        if !!@parent and\n          @parent.rowSum[@parent.childs.indexOf(@)] != undefined and\n          not isNaN(@parent.rowSum[@parent.childs.indexOf(@)]) and\n          @parent.rowSum[@parent.childs.indexOf(@)] != 0\n            result = result*@parent.rowSum[@parent.childs.indexOf(@)]\n        \n      result\n        \n","'use strict'\n\n### Sevices ###\n\nangular.module('app.services', [])\n\n.factory 'version', -> \"0.1\"\n"]}